-- CC-DOS v1.5 - Utilities API

-- Functions

function explode(inputstr,sep)
    if sep == nil then
        sep = "%s"
    end
    local t = {} ; i=1
    for str in string.gmatch(inputstr, "([^"..sep.."]+)") do
        t[i] = str
        i = i + 1
    end
    return t
end

function dosPathToUnixPath(path)
    local drives = storage.getDrives()
    local mnt = explode(path,":\\")[1]
    for k,v in pairs(drives) do
        if storage.isRegistered(v.LOCATION,mnt) then
            if mnt == "C" then
    		    local brk = string.sub(path,4,5+(string.len(path)-5))
    		    local pth = table.concat(explode(brk,"\\"),"/")
    		    return "/"..pth
    	    else
    		    local brk = drive.path..string.sub(path,4,5+(string.len(path)-5))
    		    local pth = table.concat(explode(brk,"\\"),"/")
    		    return pth
    	    end
    	    return nil
        end
    end
    return nil
end